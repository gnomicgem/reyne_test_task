# reyne_test_task

# Оглавление
- [Описание](#описание)
- [Установка](#установка)
- [Задача 1](#задача-1)
- [Задача 2](#задача-2)
- [Задача 3](#задача-3)
- [Задача 4](#задача-4)

## Описание
Данный репозиторий содержит решение тестового задания, 
состоящего из четырех разнообразных задач, 
объединенных темой построения алгоритмов. Первая задача посвящена 
реализации алгоритма для парсинга и сортировки больших данных. 
Вторая задача ставит целью определение того, можно ли некую слитную строку
представить в виде последовательности раздельных слов. Условими третьей задачи является 
минимизирование резких скачков в геоданных и 
максимально точное отражение реального маршрута курьера. 
Четвертая задача требует найти оптимальный маршрут для кладовщика 
в представленном пространстве склада.

## Установка

Клонируйте репозиторий:

```
git clone <url>
cd <название_папки>
```

Установите зависимости:

```
bundle install
```

Примените тесты:

```
bundle exec rspec
```

## Задача 1

Разработана программа __csv_sorter__, которая принимает на вход файл в формате csv, 
а на выходе выдает новый файл, сортируя данные. Каждая строка файла представляет 
одну транзакцию и имеет следующий формат:
<timestamp>,<transaction_id>,<user_id>,<amount>

Пример строки:
2023-09-03T12:45:00Z,txn12345,user987,500.25

### Функционал

1. Программа читает файл с диска, не загружая его полностью в память.
2. Парсит каждую строку и представляет транзакции в виде объектов.
3. Сортирует транзакции по amount в порядке убывания.
4. Записывает отсортированные транзакции в новый файл, также не загружая все данные в память одновременно.


### Запуск

__Дополнительно__ запустите программу csv_generator, настроив количество строк 
в исполнительном файле, для создания csv файла со случайным набором данных:

```
ruby csv_generator.rb
```

Запустите основную программу, 
указав необходимые опции запуска в аргументах командной строке:

```
ruby csv_sorter.rb -i INPUT_FILE -o OUTPUT_FILE [OPTIONS]
```

Опции:
- -i, --input FILE – Путь к входному файлу (обязательный).
- -o, --output FILE – Путь к выходному файлу (обязательный).
- -b, --batch-size SIZE – Размер пакета (по умолчанию: 2).
- -t, --temp-dir DIR – Путь к временной директории (по умолчанию: /tmp).

Если не будут казаны обязательные параметры --input или --output, 
программа выведет ошибку и завершится.

## Задача 2

Написана программа __string_splitter__, которая принимает словарь слов и слитную строку. 
Используя словарь, __string_splitter__ проверяет строку на возможность представить ее
в виде последовательных слов, разделенных пробелом. 

Пример: дано, s =«двесотни», d = [«две», «сотни», «тысячи»]. 
Программа должна вернуть true, потому что «двесотни» могут быть представлены как «две сотни».

### Запуск

Запустите программу и следуйте инструкциям в терминале:

```
ruby string_splitter.rb
```

## Задача 3

### Дано

Имеется набор данных, представляющих геопозиции курьера, собранные с GPS-маячка, 
установленного на его электровелосипеде. Маячок собирает данные каждые 20 секунд. 
Из-за плотной застройки и различных помех данные могут быть неточными, 
с погрешностью до 50 метров, особенно в местах парковки.
Предложите алгоритм для обработки данных геопозиций курьера с целью построения 
его маршрута на карте. Алгоритм должен минимизировать резкие скачки в данных 
и максимально точно отражать реальный маршрут курьера.

### Решение

Для обработки маршрута курьера с минимизацией скачков и 
максимальным приближением к реальному пути следует реализовать следующие шаги:

__Фильтрация шумов__

Уберите резкие скачки геопозиций, которые могут быть вызваны погрешностью GPS.

- Рассчитайте расстояние между каждой парой последовательных точек.
- Если расстояние превышает реалистичное значение, удалите или отметьте такие точки как подозрительные.
- Используйте метод медианного фильтра: замените каждую точку медианой значений её ближайших соседей (например, 5 точек вокруг).

__Усреднение данных (сглаживание)__

Уменьшите погрешности, усредняя близкие точки.

- Примените алгоритм сглаживания, например, скользящее среднее.
- Используйте экспоненциальное сглаживание, чтобы уменьшить влияние старых данных.

__Устранение статичных зон (стоянок)__

Уберите повторяющиеся точки в местах, где курьер не двигался.

- Группируйте точки, которые находятся в радиусе менее 10 метров друг от друга.
- Считайте их одной точкой стоянки.
- Сохраните время начала и окончания стоянки для последующего анализа.

__Интерполяция пропущенных данных__

Восстановите маршрут на промежутках с пропущенными данными.

- Используйте линейную интерполяцию для восстановления промежуточных точек.
- Если доступны данные о скорости, учитывайте её для улучшения интерполяции.

__Сегментация маршрута__

Разделите маршрут на сегменты, чтобы упростить анализ.

- Разделите данные по стоянкам или значительным изменениям скорости.
- Пусть каждый сегмент представляет собой отдельный отрезок маршрута, который можно отобразить на карте.

__Создание маршрута__

Постройте плавный маршрут на основе очищенных данных.

- Постройте полилинию, используя отфильтрованные и интерполированные точки.
- Для визуализации на карте примените алгоритмы сглаживания траектории (Метод Безье)

## Задача 4

### Дано

У компании имеется следующии склад, три ряда стеллажеи, стоящие в ряд по 700 ед. 
Каждый стеллаж содержит 5 полок. Каждая полка содержит 6 ячеек. 
Между рядами стеллажей есть проходы. Между стеллажами в одном ряду проходов нет. 
Ширина полок одинакова и равна ширине прохода. Зеленым цветом обозначены проходы.
Кладовщику выдается случайный перечень ячеек, из которых требуется взять товар. 
Помогите составить маршрут передвижения кладовщика по складу, начиная движение от стола, 
таким образом, чтобы он затратил минимально возможный путь.

### Решение

Для нахождения оптимального маршрута кладовщика следует реализовать следующие шаги:

__Сбор входных данных__

- Определите список ячеек, из которых нужно забрать товар. Например: A1, A5, B3, C2 и т.д.
- Определите координаты всех ячеек на схеме (ряд, стеллаж, полка, ячейка)

__Расчет расстояний__

- Для каждой ячейки вычислите минимальное расстояние от текущего положения до нее.
- Учитывайте перемещение вдоль ряда.
- Перемещение через проходы между стеллажами (если требуется смена ряда).

__Выбор стратегии обхода__

Примените жадный алгоритм ближайшего соседа.

- Из текущей позиции кладовщик выбирает ячейку, которая находится ближе всего.
- Переходит в эту ячейку, удаляет ее из списка задач.
- Повторяет до тех пор, пока все ячейки не будут посещены.

__Оптимизация маршрута__

Если список ячеек длинный, можно улучшить маршрут, применив алгоритм ветвей и границ или 
другие эвристики для больших списков задач.

__Возвращение к исходной точке__

После сбора товаров из всех ячеек маршрут завершается возвратом к столу, 
чтобы кладовщик доставил собранные товары.

__Оптимальность решения__

Алгоритм ближайшего соседа минимизирует расстояние на каждом шаге, 
что делает решение близким к оптимальному.
